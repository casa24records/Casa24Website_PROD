"use strict";(self.webpackChunk_genially_view_client=self.webpackChunk_genially_view_client||[]).push([[747],{72644:(e,t,n)=>{n.r(t),n.d(t,{default:()=>T});var r=n(14726),i=n(84398),o=n(17588);const s=()=>({height:window.innerHeight,width:window.innerWidth}),l=()=>{const[e,t]=(0,o.useState)(s);return(0,o.useEffect)((()=>{const e=()=>t(s());return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),e};var c=n(37577);const u=c.Ay.div({position:"absolute",borderRadius:"50%",zIndex:3,pointerEvents:"none",touchAction:"none",opacity:.75});var a=n(45992);const h=(0,r.PA)((()=>{const{paintStore:e,viewStore:t}=(0,i.g)(),n=(()=>{const[e,t]=(0,o.useState)();return(0,o.useEffect)((()=>{const e=e=>{t({x:e.clientX,y:e.clientY})};return window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousemove",e)}}),[]),e})(),{selectedColor:r,widthSelected:s}=e,l=t.currentSlide,c=s*t.calculateSlideScaleToFit(l),h=(null===n||void 0===n?void 0:n.x)||0,d=(null===n||void 0===n?void 0:n.y)||0;return(0,a.jsx)(u,{style:{width:c,height:c,backgroundColor:r,left:h-c/2,top:d-c/2}})}));function d(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e=>e;return e*r(.5-t*(.5-n))}function p(e){return[-e[0],-e[1]]}function g(e,t){return[e[0]+t[0],e[1]+t[1]]}function f(e,t){return[e[0]-t[0],e[1]-t[1]]}function v(e,t){return[e[0]*t,e[1]*t]}function w(e){return[e[1],-e[0]]}function x(e,t){return e[0]*t[0]+e[1]*t[1]}function y(e,t){return e[0]===t[0]&&e[1]===t[1]}function m(e,t){return function(e){return e[0]*e[0]+e[1]*e[1]}(f(e,t))}function L(e){return function(e,t){return[e[0]/t,e[1]/t]}(e,function(e){return Math.hypot(e[0],e[1])}(e))}function C(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])}function S(e,t,n){let r=Math.sin(n),i=Math.cos(n),o=e[0]-t[0],s=e[1]-t[1],l=o*r+s*i;return[o*i-s*r+t[0],l+t[1]]}function M(e,t,n){return g(e,v(f(t,e),n))}function b(e,t,n){return g(e,v(t,n))}var{min:P,PI:z}=Math,A=.275,k=z+1e-4;function j(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{size:n=16,smoothing:r=.5,thinning:i=.5,simulatePressure:o=!0,easing:s=(e=>e),start:l={},end:c={},last:u=!1}=t,{cap:a=!0,easing:h=(e=>e*(2-e))}=l,{cap:y=!0,easing:C=(e=>--e*e*e+1)}=c;if(0===e.length||n<=0)return[];let z,j=e[e.length-1].runningLength,E=!1===l.taper?0:!0===l.taper?Math.max(n,j):l.taper,_=!1===c.taper?0:!0===c.taper?Math.max(n,j):c.taper,Z=Math.pow(n*r,2),H=[],I=[],W=e.slice(0,10).reduce(((e,t)=>{let r=t.pressure;if(o){let i=P(1,t.distance/n),o=P(1,1-i);r=P(1,e+i*A*(o-e))}return(e+r)/2}),e[0].pressure),F=d(n,i,e[e.length-1].pressure,s),T=e[0].vector,X=e[0].point,Y=X,B=X,R=Y,D=!1;for(let p=0;p<e.length;p++){let{pressure:t}=e[p],{point:r,vector:l,distance:c,runningLength:u}=e[p];if(p<e.length-1&&j-u<3)continue;if(i){if(o){let e=P(1,c/n),r=P(1,1-e);t=P(1,W+e*A*(r-W))}F=d(n,i,t,s)}else F=n/2;void 0===z&&(z=F);let a=u<E?h(u/E):1,y=j-u<_?C((j-u)/_):1;F=Math.max(.01,F*Math.min(a,y));let L=(p<e.length-1?e[p+1]:e[p]).vector,b=p<e.length-1?x(l,L):1,N=null!==b&&b<0;if(x(l,T)<0&&!D||N){let e=v(w(T),F);for(let t=1/13,n=0;n<=1;n+=t)B=S(f(r,e),r,k*n),H.push(B),R=S(g(r,e),r,k*-n),I.push(R);X=B,Y=R,N&&(D=!0);continue}if(D=!1,p===e.length-1){let e=v(w(l),F);H.push(f(r,e)),I.push(g(r,e));continue}let Q=v(w(M(L,l,b)),F);B=f(r,Q),(p<=1||m(X,B)>Z)&&(H.push(B),X=B),R=g(r,Q),(p<=1||m(Y,R)>Z)&&(I.push(R),Y=R),W=t,T=l}let N=e[0].point.slice(0,2),Q=e.length>1?e[e.length-1].point.slice(0,2):g(e[0].point,[1,1]),q=[],G=[];if(1===e.length){if(!E&&!_||u){let e=b(N,L(w(f(N,Q))),-(z||F)),t=[];for(let n=1/13,r=n;r<=1;r+=n)t.push(S(e,N,2*k*r));return t}}else{if(!(E||_&&1===e.length))if(a)for(let e=1/13,n=e;n<=1;n+=e){let e=S(I[0],N,k*n);q.push(e)}else{let e=f(H[0],I[0]),t=v(e,.5),n=v(e,.51);q.push(f(N,t),f(N,n),g(N,n),g(N,t))}let t=w(p(e[e.length-1].vector));if(_||E&&1===e.length)G.push(Q);else if(y){let e=b(Q,t,F);for(let t=1/29,n=t;n<1;n+=t)G.push(S(e,Q,3*k*n))}else G.push(g(Q,v(t,F)),g(Q,v(t,.99*F)),f(Q,v(t,.99*F)),f(Q,v(t,F)))}return H.concat(G,I.reverse(),q)}function E(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;let{streamline:r=.5,size:i=16,last:o=!1}=t;if(0===e.length)return[];let s=.15+.85*(1-r),l=Array.isArray(e[0])?e:e.map((e=>{let{x:t,y:n,pressure:r=.5}=e;return[t,n,r]}));if(2===l.length){let e=l[1];l=l.slice(0,-1);for(let t=1;t<5;t++)l.push(M(l[0],e,t/4))}1===l.length&&(l=[...l,[...g(l[0],[1,1]),...l[0].slice(2)]]);let c=[{point:[l[0][0],l[0][1]],pressure:l[0][2]>=0?l[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],u=!1,a=0,h=c[0],d=l.length-1;for(let p=1;p<l.length;p++){let e=o&&p===d?l[p].slice(0,2):M(h.point,l[p],s);if(y(h.point,e))continue;let t=C(e,h.point);if(a+=t,p<d&&!u){if(a<i)continue;u=!0}h={point:e,pressure:l[p][2]>=0?l[p][2]:.5,vector:L(f(h.point,e)),distance:t,runningLength:a},c.push(h)}return c[0].vector=(null==(n=c[1])?void 0:n.vector)||[0,0],c}function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return j(E(e,t),t)}const Z={size:16,smoothing:1,thinning:.5,streamline:0,easing:e=>e,start:{taper:0,cap:!0},end:{taper:0,cap:!0}};const H=(0,r.PA)((e=>{let{path:t}=e;const n=function(e){if(!e.length)return"";let t="M ".concat(e[0][0]," ").concat(e[0][1]," Q");for(let n=0;n<e.length;n+=1){const[r,i]=e[n],[o,s]=e[(n+1)%e.length];t+=" ".concat(r," ").concat(i," ").concat((r+o)/2," ").concat((i+s)/2)}return t+"Z"}(_(t.points,{...Z,size:t.size}));return(0,a.jsx)("path",{d:n,fill:t.color})}));const I=function(e){const t=window.btoa(e);return"data:image/svg+xml;base64,".concat(t)}('\n    <svg width="'.concat(24,'" height="').concat(24,'" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">\n        <g style="filter: drop-shadow(0px 1px 4px rgba(0, 15, 51, 0.20)););">\n            <path d="M46.2844 5.22217C46.0912 5.22048 45.9066 5.29562 45.7712 5.43105L10.614 40.5882C9.07684 42.1254 8.03639 44.0885 7.62735 46.2236L5.22214 58.778L17.7765 56.3728C19.9116 55.9638 21.8748 54.9233 23.412 53.3861L58.5691 18.229C58.7045 18.0936 58.7797 17.9089 58.778 17.7157C58.7181 10.8756 53.1246 5.28204 46.2844 5.22217Z" fill="white"/>\n            <path fill-rule="evenodd" clip-rule="evenodd" d="M60.1353 17.7037C60.0689 10.1232 53.8768 3.93105 46.2963 3.8647C45.7426 3.85986 45.2067 4.07564 44.8112 4.47111L9.65412 39.6282C7.92477 41.3576 6.75427 43.5661 6.2941 45.9681L3.88889 58.5225C3.80423 58.9644 3.94405 59.4196 4.26222 59.7378C4.5804 60.0559 5.03556 60.1958 5.47749 60.1111L18.0319 57.7059C20.4338 57.2457 22.6424 56.0752 24.3718 54.3459L59.5289 19.1888C59.9244 18.7933 60.1401 18.2574 60.1353 17.7037ZM40.8692 12.2525L46.5369 6.58488C52.428 6.77495 57.225 11.572 57.4151 17.4631L51.7475 23.1308L40.8692 12.2525ZM38.9495 14.1722L11.5738 41.5479C10.2288 42.893 9.31838 44.6107 8.96046 46.4789L6.93173 57.0683L17.521 55.0395C19.3893 54.6816 21.107 53.7712 22.4521 52.4262L49.8278 25.0505L38.9495 14.1722Z" fill="black"/>\n        </g>\n    </svg>\n')),W=c.Ay.svg((()=>({zIndex:2,opacity:.75,touchAction:"none"}))),F=(0,r.PA)((()=>{var e;const t=(0,i.g)(),[n,r]=(0,o.useState)(!1),{viewStore:s}=t,c=t.paintStore,{sketchStorage:u,selectedColor:d,widthSelected:p}=c,g=s.currentSlide.Id,f=s.currentSlide,v=s.calculateSlideScaleToFit(f),w=l(),x=(w.width-f.Width*v)/2,y=(w.height-f.Height*v)/2,m=e=>({x:(e.x-x)/v,y:(e.y-y)/v,pressure:e.pressure}),L=(0,o.useRef)(void 0);return(0,a.jsxs)(o.Fragment,{children:[n&&(0,a.jsx)(h,{}),(0,a.jsx)(W,{"data-genially-role":"sketch-svg",onPointerDown:e=>{const t=c.startPath(g);t.setColor(d),t.setSize(p),t.addPoint(m({x:e.pageX,y:e.pageY,pressure:e.pressure})),L.current=t},onPointerMove:e=>{var t;1===e.buttons&&(null===(t=L.current)||void 0===t||t.addPoint(m({x:e.pageX,y:e.pageY,pressure:e.pressure})))},onMouseEnter:()=>{document.body.style.cursor="url(".concat(I,") 1 ").concat(23,", auto"),r(!0)},onMouseLeave:()=>{document.body.style.cursor="auto",r(!1)},style:{width:f.Width*v,height:f.Height*v},viewBox:"0 0 ".concat(f.Width," ").concat(f.Height),children:null===(e=u.get(g))||void 0===e?void 0:e.map(((e,t)=>(0,a.jsx)(H,{path:e},"path-".concat(t.toString()))))})]})})),T=(0,r.PA)((()=>{const{viewStore:e}=(0,i.g)();return(0,a.jsx)("div",{className:"genially-view-sketch-field-container",children:!e.slideTransitioning&&(0,a.jsx)(F,{})})}))}}]);
//# sourceMappingURL=https://s3-static-genially.genially.com/view/static/js/sketch.177dbc8d.chunk.js.map